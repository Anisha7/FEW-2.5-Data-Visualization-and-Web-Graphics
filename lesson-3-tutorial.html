<div id="container"></div>
<div>
	<button id="random-button">Randomize</button>
	<button id="toggle-button">Toggle</button>
</div>

<div>
	<button class="random-button-group" data-name="a">A</button>
	<button class="random-button-group" data-name="b">B</button>
	<button class="random-button-group" data-name="c">C</button>
</div>

<script>
	
	// ----------------------------------------------------
	// Make some random data
	
	const data = []
	for (let i = 0; i < 100; i += 1) {
		const a = Math.random()
		const b = Math.random()
		const c = Math.random()
		data.push({ a, b, c })
	}
	
	
	// ---------------------------------------------------
	// Configure the container

	const container = document.getElementById('container')
	container.style.width = '600px'
	container.style.height = '400px'
	container.style.border = '1px solid'
	container.style.borderRadius = '10px'
	container.style.position = 'relative'
	
	const body = document.querySelector('body')
	body.style.display = 'flex'
	body.style.justifyContent = 'center'
	body.style.alignItems = 'center'
	body.style.flexDirection = 'column'
	
	
	// -----------------------------------------------
	// Make things elements to display
	
	const elements = []
	
	function makeThings() {
		let step = 600 / data.length
		let i = 0
		data.forEach((item) => {
			const el = makeThing()
			el.style.left = `${step * i}px`
			el.style.top = `${item.a * 400}px`
			i += 1
			container.appendChild(el)
			elements.push(el)
		})
	}
	
	function makeThing() {
		const el = document.createElement('div')
		el.style.width = '5px'
		el.style.height = '5px'
		el.style.backgroundColor = 'red'
		el.style.position = 'absolute'
		el.style.transition = '400ms'
		return el
	}
	
	makeThings()

	// -------------------------------------------------
	// Set up the button
	
	function selectButton(button, state) {
		button.style.border = '1px solid'
		button.style.borderRadius = '5px'
		button.style.margin = '5px'
		button.style.padding = '5px 10px'
		
		if (state) {
			button.style.backgroundColor = '#000'
			button.style.color = '#fff'
		} else {
			button.style.backgroundColor = '#fff'
			button.style.color = '#000'
		}
	}
	
	// Toggle button
	function makeToggleButton(button, callback) {
		let buttonState = false
		button.addEventListener('click', (e) => {
			buttonState = !buttonState
			selectButton(button, buttonState)
			callback(buttonState)
		})
		selectButton(button, buttonState)
	}
	
	const randomButton = document.getElementById('random-button')
	const toggleButton = document.getElementById('toggle-button')
	
	makeToggleButton(randomButton, (state) => {
		if (state) {
			showField('b')
		} else {
			showField('a')
		}
	})
	
	makeToggleButton(toggleButton, (state) => {
		let i = 0
		const step = 360 / elements.length
		elements.forEach((el) => {
			const c = step * i
			if (state) {
				el.style.backgroundColor = `hsl(${c}, 50%, 50%)`
			} else {
				el.style.backgroundColor = 'red'
			}
			i += 1
		}) 
	})
	
	
	function showField(field) {
		let i = 0
		elements.forEach((el) => {
			el.style.top = `${data[i][field] * 400}px`
			el.style.height = '5px'
			i += 1
		}) 
	}
	
	
	// ------------------------------------------------
	// Set up a group of buttons
	
	const buttons = document.querySelectorAll('.random-button-group')
	
	function makeGroup(buttons, callback) {
		buttons.forEach((button) => {
			selectButton(button, false)
			button.addEventListener('click', (e) => {
				buttons.forEach((b) => {
					if (b === button) {
						selectButton(b, true)
					} else {
						selectButton(b, false)
					}
				})
				callback(button)
			})
		})
	}
	
	makeGroup(buttons, (button) => {
		let i = 0
		elements.forEach((el) => {
			const h = data[i][button.dataset.name] * 400
			el.style.top = `${400 - h}px`
			el.style.height = `${h}px`
			i += 1
		}) 
	})
	
	
</script>









